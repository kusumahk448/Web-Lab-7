<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>Book List</title>
</head>
<body>
    <div class="container">
        <h1>Fictional Book List</h1>
        
        <!-- Filtering and Sorting Controls -->
        <div class="controls">
            <select id="filter-genre">
                <option value="">All Genres</option>
                <option value="Fiction">Fiction</option>
                <option value="Science Fiction">Science Fiction</option>
                <option value="Fantasy">Fantasy</option>
                <option value="Mystery">Mystery</option>
            </select>
            
            <div>
                <button id="sort-title">Sort by Title</button>
                <button id="sort-author">Sort by Author</button>
            </div>
        </div>
        
        <!-- Book List -->
        <div id="book-list" class="book-list"></div>
        
        <!-- Pagination Controls -->
        <div id="pagination" class="pagination"></div>
        
        <!-- Error Message -->
        <div id="error-message" class="error-message"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const bookList = document.getElementById('book-list');
            const errorMessage = document.getElementById('error-message');
            const filterGenre = document.getElementById('filter-genre');
            const sortTitleButton = document.getElementById('sort-title');
            const sortAuthorButton = document.getElementById('sort-author');
            const pagination = document.getElementById('pagination');

            // Embedded JSON Data
            const books = [
                { "title": "The Great Adventure", "author": "John Smith", "genre": "Fiction" },
                { "title": "Mystery of the Lost City", "author": "Jane Doe", "genre": "Mystery" },
                { "title": "Journey to the Stars", "author": "Alice Johnson", "genre": "Science Fiction" },
                { "title": "The Fantasy Realm", "author": "Bob Williams", "genre": "Fantasy" },
                { "title": "Secrets of the Universe", "author": "Cathy Brown", "genre": "Science Fiction" },
                { "title": "Into the Unknown", "author": "Tom Clark", "genre": "Science Fiction" },
                { "title": "The Hidden World", "author": "Emily Davis", "genre": "Fantasy" },
                { "title": "Enigma of the Ancient", "author": "Michael Lee", "genre": "Mystery" },
                { "title": "The Last Horizon", "author": "Sarah Miller", "genre": "Fiction" },
                { "title": "Chronicles of Magic", "author": "David Wilson", "genre": "Fantasy" },
                { "title": "Galactic Odyssey", "author": "Laura Martinez", "genre": "Science Fiction" },
                { "title": "The Enchanted Forest", "author": "Chris Anderson", "genre": "Fantasy" },
                { "title": "Lost in Time", "author": "Jessica Robinson", "genre": "Science Fiction" },
                { "title": "The Secret Keeper", "author": "Daniel White", "genre": "Mystery" },
                { "title": "Echoes of the Past", "author": "Nancy Lewis", "genre": "Mystery" }
            ];

            let currentPage = 1;
            const booksPerPage = 5;

            // Display books on the page
            function displayBooks() {
                bookList.innerHTML = '';
                const filteredBooks = filterBooks();
                const sortedBooks = sortBooks(filteredBooks);
                const paginatedBooks = paginateBooks(sortedBooks);

                paginatedBooks.forEach(book => {
                    const bookItem = document.createElement('div');
                    bookItem.classList.add('book-item');
                    bookItem.innerHTML = `
                        <h3>${book.title}</h3>
                        <p>Author: ${book.author}</p>
                        <p>Genre: ${book.genre}</p>
                    `;
                    bookList.appendChild(bookItem);
                });
            }

            // Filter books by genre
            function filterBooks() {
                const selectedGenre = filterGenre.value;
                if (selectedGenre === '') {
                    return books;
                }
                return books.filter(book => book.genre === selectedGenre);
            }

            // Sort books by title or author
            function sortBooks(filteredBooks) {
                if (sortTitleButton.classList.contains('active')) {
                    return filteredBooks.sort((a, b) => a.title.localeCompare(b.title));
                } else if (sortAuthorButton.classList.contains('active')) {
                    return filteredBooks.sort((a, b) => a.author.localeCompare(b.author));
                }
                return filteredBooks;
            }

            // Paginate books
            function paginateBooks(sortedBooks) {
                const startIndex = (currentPage - 1) * booksPerPage;
                const endIndex = startIndex + booksPerPage;
                return sortedBooks.slice(startIndex, endIndex);
            }

            // Create pagination buttons
            function createPagination() {
                pagination.innerHTML = '';

                const totalPages = Math.ceil(books.length / booksPerPage);

                const createButton = (text, className, clickHandler) => {
                    const button = document.createElement('button');
                    button.textContent = text;
                    button.className = className;
                    button.addEventListener('click', clickHandler);
                    pagination.appendChild(button);
                };

                // First page button
                createButton('First', 'pagination-button', () => {
                    currentPage = 1;
                    updatePagination();
                });

                // Previous page button
                createButton('Previous', `pagination-button ${currentPage === 1 ? 'disabled' : ''}`, () => {
                    if (currentPage > 1) {
                        currentPage--;
                        updatePagination();
                    }
                });

                // Page number buttons
                for (let i = 1; i <= totalPages; i++) {
                    createButton(i, `pagination-button ${i === currentPage ? 'active' : ''}`, () => {
                        currentPage = i;
                        updatePagination();
                    });
                }

                // Next page button
                createButton('Next', `pagination-button ${currentPage === totalPages ? 'disabled' : ''}`, () => {
                    if (currentPage < totalPages) {
                        currentPage++;
                        updatePagination();
                    }
                });

                // Last page button
                createButton('Last', 'pagination-button', () => {
                    currentPage = totalPages;
                    updatePagination();
                });
            }

            // Update pagination and display books
            function updatePagination() {
                displayBooks();
                createPagination();
            }

            // Event listeners for filtering, sorting, and pagination
            filterGenre.addEventListener('change', () => {
                currentPage = 1;
                updatePagination();
            });

            sortTitleButton.addEventListener('click', () => {
                sortTitleButton.classList.add('active');
                sortAuthorButton.classList.remove('active');
                updatePagination();
            });

            sortAuthorButton.addEventListener('click', () => {
                sortAuthorButton.classList.add('active');
                sortTitleButton.classList.remove('active');
                updatePagination();
            });

            // Initial display of books and pagination
            updatePagination();
        });
    </script>
</body>
</html>
